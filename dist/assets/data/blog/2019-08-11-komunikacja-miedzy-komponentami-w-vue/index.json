{"hash":"2cb1e7b33d1b4e264d390a190f1ff37344b54d05","data":{"post":{"title":"Komunikacja między komponentami w Vue.","date":"11 sierpnia, 2019","content":"<p>Ostatnio nieco myślałem na temat samej komunikacji między komponentami w przypadku Vue,\ntemat jest o tyle ciekawy, że możemy realizować tą komunikację na parę sposobów. Na tą chwilę myślę o jakichś dwóch lub trzech postach, które pojawią się na tym blogu i będą związane z tym zagadnieniem. Dziś postaram się przedstawić tą najprostszą możliwą komunikację między dwoma komponentami czyli rodzicem, a dzieckiem.</p>\n<h1 id=\"czym-są-propsy-i-jak-wygląda-komunikacja-między-komponentem-rodzica-a-dziecka\"><a href=\"#czym-s%C4%85-propsy-i-jak-wygl%C4%85da-komunikacja-mi%C4%99dzy-komponentem-rodzica-a-dziecka\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Czym są propsy i jak wygląda komunikacja między komponentem rodzica, a dziecka?</h1>\n<p>Załóżmy, że napisaliśmy jakiś komponent, który zawiera dane, które możemy wyświetlić używając\ntemplate’u.</p>\n<blockquote>\n<p>Parrent</p>\n</blockquote>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>importantData<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">'parrent'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">return</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">importantData</span><span class=\"token operator\">:</span> <span class=\"token string\">\"some data\"</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span>\n\n\n<span class=\"token operator\">&lt;</span>style scoped lang<span class=\"token operator\">=</span><span class=\"token string\">\"scss\"</span><span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">></span></code></pre>\n<p>Jednakże w miarę jak nasza aplikacja się rozrasta potrzebujemy dodać nowy komponent lub komponenty, które będą dziećmi naszego pierwszego komponentu rodzica.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>importantData<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n   <span class=\"token operator\">&lt;</span><span class=\"token maybe-class-name\">Child</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token maybe-class-name\">Child</span><span class=\"token operator\">></span>\n <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token maybe-class-name\">Child</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"./child\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e\"</span><span class=\"token punctuation\">,</span>\n <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword control-flow\">return</span> <span class=\"token punctuation\">{</span>\n     <span class=\"token literal-property property\">importantData</span><span class=\"token operator\">:</span> <span class=\"token string\">\"some data\"</span>\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n <span class=\"token literal-property property\">components</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token maybe-class-name\">Child</span>\n <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre>\n<p>W tym momencie też zaczynamy myśleć, że jednak dobrze byłoby żeby dziecko też mogło wykorzystać tą niezwykle ważną zmienną, którą posiada rodzic? W tym momencie pojawiają się propsy. Dzięki propsom będziemy mogli przekazać zmienną z rodzica do dziecka. Oto jak przekazujemy dane do dziecka.</p>\n<pre class=\"language-js\"><code class=\"language-js\"> <span class=\"token operator\">&lt;</span><span class=\"token maybe-class-name\">Child</span> <span class=\"token operator\">:</span>importantdata<span class=\"token operator\">=</span><span class=\"token string\">\"importantData\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token maybe-class-name\">Child</span><span class=\"token operator\">></span></code></pre>\n<p>Koniecznie w komponencie dziecka musimy zadeklarować iż przyjmujemy propsy od rodzica.\nTak oto wygląda komponent dziecka.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>importantData<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"child\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"importantData\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre>\n<h2 id=\"zapis-propsów\"><a href=\"#zapis-props%C3%B3w\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Zapis propsów</h2>\n<p>Tutaj też można zaznaczyć, że możemy propsy przekazywać w tablicy jako zwykłe stringi, ale o wiele lepszym rozwiązaniem jest to by zadeklarować jako obiekt i przedstawić typ danej zmiennej\ndzięki temu nasz kod będzie nieco czytelniejszy.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"child\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">importantData</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">String</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre>\n<h2 id=\"komunikacja-dziecka-z-rodzicem-czyli-emity\"><a href=\"#komunikacja-dziecka-z-rodzicem-czyli-emity\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Komunikacja dziecka z rodzicem czyli emit’y</h2>\n<p>Istnieje też możliwość żeby przekazać zmienną z komponentu dziecka do rodzica. Załóżmy, że nasz komponent dziecka zawiera przycisk, który po kliknięciu zwraca pobrane dane i chcielibyśmy te dane wyświetlić w rodzicu. W takim momencie przydaje się nam \\$emit dzięki któremu będziemy mogli przekazać te dane do rodzica. A oto jak wygląda przykładowy emit.</p>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">$emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clicked\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"some fetched data\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre>\n<blockquote>\n<p>Komponent dziecka</p>\n</blockquote>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>importantData<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>button @click<span class=\"token operator\">=</span><span class=\"token string\">\"fetchData\"</span><span class=\"token operator\">></span>fetch data<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"child\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">props</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">importantData</span><span class=\"token operator\">:</span> <span class=\"token known-class-name class-name\">String</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">fetchData</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">event</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">$emit</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"clicked\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"some fetched data\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span>\n\n\n<span class=\"token operator\">&lt;</span>style scoped lang<span class=\"token operator\">=</span><span class=\"token string\">\"scss\"</span><span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">></span></code></pre>\n<p>W komponencie rodzica emit wywołujemy przy pomocy nazwy eventu, który sobie nadaliśmy używając emitu, w tym przypadku będzie to po prostu <code>clicked</code>, ale ta nazwa może być dowolna. Następnie możemy przy pomocy metody odczytać wartość, którą otrzymujemy przez emit.</p>\n<blockquote>\n<p>komponent rodzica</p>\n</blockquote>\n<pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>template<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>importantData<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token maybe-class-name\">Child</span> <span class=\"token operator\">:</span>importantdata<span class=\"token operator\">=</span><span class=\"token string\">\"importantData\"</span> @clicked<span class=\"token operator\">=</span><span class=\"token string\">\"clickChild\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token maybe-class-name\">Child</span><span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>template<span class=\"token operator\">></span>\n\n<span class=\"token operator\">&lt;</span>script<span class=\"token operator\">></span>\n<span class=\"token keyword module\">import</span> <span class=\"token imports\"><span class=\"token maybe-class-name\">Child</span></span> <span class=\"token keyword module\">from</span> <span class=\"token string\">\"./child\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword module\">export</span> <span class=\"token keyword module\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token string\">\"e\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword control-flow\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">importantData</span><span class=\"token operator\">:</span> <span class=\"token string\">\"some new data\"</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">methods</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clickChild</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">value</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">components</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token maybe-class-name\">Child</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>script<span class=\"token operator\">></span></code></pre>\n<p>Props i emit są to najczęściej wykorzystywane mechanizmy do prostej komunikacji między dzieckiem, a rodzicem. Tutaj też warto na pewno wspomnieć, że możemy emitować dane z dziecka, ale to rodzic będzie decydował w jaki sposób zostaną wykorzystane. Dobrym przykładem może być że klikając na przycisk zamknięcia okna modalnego wykonamy emit do rodzica zmieniając\nwartość zmiennej <code>showModal</code> z true na false. <a href=\"https://jsfiddle.net/yyx990803/mwLbw11k/?utm_source=website&#x26;utm_medium=embed&#x26;utm_campaign=mwLbw11k\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Tutaj można odnaleźć oficjalny przykład.</a></p>\n","image":{"type":"image","mimeType":"image/jpeg","src":"/assets/static/michelangelo-71282_1280.83f8925.41a5ccab2028cbf31cd7aafd80dd28d9.jpg","size":{"width":1280,"height":803},"sizes":"(max-width: 1280px) 100vw, 1280px","srcset":["/assets/static/michelangelo-71282_1280.1b91758.41a5ccab2028cbf31cd7aafd80dd28d9.jpg 480w","/assets/static/michelangelo-71282_1280.83f8925.41a5ccab2028cbf31cd7aafd80dd28d9.jpg 1280w"],"dataUri":"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1280 803' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-7fa96a2897dcba71c8c48b8ba03533c2'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-7fa96a2897dcba71c8c48b8ba03533c2)' width='1280' height='803' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAoAEADASIAAhEBAxEB/8QAGwAAAwEBAQEBAAAAAAAAAAAABQYHAAgDAgT/xAAzEAABAwMDAgMGBAcAAAAAAAABAgMFAAQRBhIhMVETQWEHFCIycYEVI1KxMzRCU2Jykv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwBYh7EAJAFO8LGbyn4aEQtuCU8U72t7YxFv49%2bvY2gZUQPlHrQH4aEBSnKaY24RIT8tCNO60gLm5LCbgISlOS4SClJxkA46ZHn0pgu9ZaasgkXErbt7uhJyDQDLyGTg/DSrMQ4SDhNPlnqKBl1FuOlbK4d/tpcG7/k81%2bOXt0lCulBFJix2FXFIs2yhIVmqxqdkI3YFSPVz4ZQvvQNjcqiztlLZSpxaeu3y9anuu9fvXDbkcwAbYfxAf6j2zXjLatNsymxiGQt9z4cgFSiT27mh7mlpGQktzGnZNQWM/wAushxXHpwM0BCIs4CBvBfSU7cKUkJUqwjVrTklI4Lqucd8D6V1B7H9MaenNFWU3faXhEvXu9bZDQey1uITndnCuOQOn1qO6X9ikjqWXjbuYhraDjGnE%2b9tKuCXH0Dk7UjJTnp1GPtXVMDGxsDD2sXEMItrG2RsaaSSdoznqeScknJoB95puAZi3GBB2AtWwpzwmbZKecZJTtAOePLmuXtQan1nGzN05HXrbUAlxfu7Tt8hZcQk8JAX%2bYSe2PvXXL900gHcsCp9qfR%2blZeTek5COt7u7c2lRcUcEpGAcAjnFBErXXYuLRH40hv3h45CP0jse1Dpd6EugVPIt1E%2bRVmqbPR8VbW6re2sLJpn9CWUgftUf1dERhS4pu3YbV3QNv7UHx7N9Oph8X18AuScHGefBHYevc/arDDSfh4yrj61q1AzI1QhhsAKGa9LHVLVw%2bEuulJPY1q1AZuJBpLBUg%2bJx51MNRT7hvVtttra/wBc4rVqBKnr6%2bLalAuKHoalWo5J11xSXPGB/wAs1q1B/9k=' /%3e%3c/svg%3e"}}},"context":{}}